

CREATE TABLE Account
(
	ID INT PRIMARY KEY AUTO_INCREMENT,
	UserName VARCHAR(40) UNIQUE,
	Passwords VARCHAR(30),
	Currency DECIMAL DEFAULT (0),
	Activity VARCHAR(8) DEFAULT ('ON'),		
	PhanQuyen VARCHAR(8) DEFAULT ('Member')
)
;

CREATE TABLE Users
(
	Account_ID INT, 
    PRIMARY KEY(Account_ID),
    FOREIGN KEY(Account_ID) REFERENCES Account(ID),
	FullName VARCHAR(40),
	Gender VARCHAR(6),
	DateOfBirth DATE,
	HomeTown VARCHAR(300),
	CCCD VARCHAR(20),
	Email VARCHAR(30) NOT NULL UNIQUE,
	Phone VARCHAR(15),
	SrcAvatar VARCHAR(300)
)
;

CREATE TABLE Bank
(
	SoTaiKhoan VARCHAR(20) PRIMARY KEY,
	TenNH VARCHAR(20),
	ChuSoHuu VARCHAR(50),
	Users_ID INT,
    FOREIGN KEY (Users_ID) REFERENCES Users(Account_ID)
)
;

CREATE TABLE Category
(
	Category_ID INT PRIMARY KEY AUTO_INCREMENT,
	TenDanhMuc VARCHAR(60)
)
;

CREATE TABLE Product
(
	MaSP INT PRIMARY KEY AUTO_INCREMENT,
	TenSP VARCHAR(40),
	SoLuong FLOAT,
	DonGia DECIMAL,
	MoTa VARCHAR(500) DEFAULT (N'Người bán không viết gì'),
	SrcImg VARCHAR(400),
	Activity VARCHAR(10) DEFAULT 'ON',
	Category_ID INT,
    FOREIGN KEY(Category_ID) REFERENCES Category(Category_ID)
)
;
CREATE TABLE ProductSeller
(
	Product_ID INT,
	Users_ID INT,
	PRIMARY KEY(Product_ID,Users_ID),
	FOREIGN KEY(Product_ID) REFERENCES Product(MaSP),
  	FOREIGN KEY(Users_ID) REFERENCES Users(Account_ID)
)
;

CREATE TABLE Voucher
(
	MaVoucher VARCHAR(10) PRIMARY KEY,
	TiLeGiamGia FLOAT,
	SotienGiamGia DECIMAL,
	SoLuong INT,
	NoiDung VARCHAR(300),
	ImgVoucher VARCHAR(300),
	NgayThem DATE,
	NgayKetThuc DATE
)
;
CREATE TABLE VoucherUser
(
	MaVoucher VARCHAR(10),
    FOREIGN KEY(MaVoucher) REFERENCES Voucher(MaVoucher),
	ID_User INT, 
FOREIGN KEY(ID_User) REFERENCES Users(Account_ID),
	PRIMARY KEY(MaVoucher,ID_User)
);
CREATE TABLE oder
(
	Oder_ID INT PRIMARY KEY AUTO_INCREMENT,
	NgayLapHD DATE,
	TongTien DECIMAL,
	MaVoucher VARCHAR(10),
    FOREIGN KEY(MaVoucher) REFERENCES Voucher(MaVoucher),
	ThanhTien DECIMAL,
	Users_ID INT,
    FOREIGN KEY(Users_ID) REFERENCES Users(Account_ID)
)
;

CREATE TABLE OderDetails
(
	Product_ID INT,
    FOREIGN KEY (Product_ID) REFERENCES Product(MaSP),
    Oder_ID INT,
    FOREIGN KEY(Oder_ID) REFERENCES Oder(Oder_ID),
    Quantity FLOAT,
    Price DECIMAL,
    PRIMARY KEY (Oder_ID, Product_ID)
)
;

CREATE TABLE PaymentHistory
(
	ID INT PRIMARY KEY AUTO_INCREMENT,
	TenGiaoDich VARCHAR(20),
	NoiDung VARCHAR(50),
	SoTien DECIMAL,
	NgayGiaoDich DATE,
	SrcImgIcon VARCHAR(300),
	Users_ID INT,
    FOREIGN KEY(Users_ID) REFERENCES Users(Account_ID),
	Account_ID INT,
    FOREIGN KEY(Account_ID) REFERENCES Account(ID)
)
;



